# 实践作业一：动态规划方法


## 概述

本次实践作业将在以下环境进行：

![这是图片](../docs/images/mini_grid.png "Magic Gardens")

该环境由一个 6×6 网格组成，其中黄色圆圈为智能体出发点，黑色格子为无法通过的墙壁，若智能体向着墙壁方向移动，则会停留在原地，地图边界的移动同理。带有黄色边框的格子为终止状态，即若智能体行动至此状态则整个 episode 结束。红色和绿色表示当前该状态的奖励值，奖励越高则绿色越深，奖励越低则红色越深。

状态空间：36（`0-35` 这 36 个整数，左下角为 0，向右 +1，向上 +6）

动作空间：4（`0-3` 这 4 个整数分别代表左、右、上、下）

奖励函数：普通格子 -0.1，到达终点(s=9) +1.0，掉入陷阱(s=23) -1.0。

## 环境配置

整个项目使用 Python 语言，在配置环境前，推荐使用 `conda` 工具管理 Python 编程环境。

#### 1. 安装 `conda` 工具 (推荐, 可选)

推荐从 [Miniconda Official](https://docs.conda.io/en/latest/miniconda.html) 下载 `Miniconda` ，安装时勾选自动添加环境变量选项，若没有勾选则需要手动添加，其他选项默认即可。

#### 2. 新建并激活用于此项目的虚拟环境 

**Option a. 使用 `conda` :**

```shell
conda create -n 2024RL python=3.9
conda activate 2024RL
```

**Option b. 使用 Python 工具 :**

```shell
python -m venv 2024RL
source 2024RL/bin/activate
```

#### 3. 配置项目仓库

```shell
git clone https://github.com/Atan03/SYSU_2024SpringRL.git
cd SYSU_2024SpringRL
```

#### 4. 安装依赖库

```shell
python -m pip install numpy==1.21.2 gym==0.10.0 pyglet==1.5.27
```

## 任务：动态规划方法

在动态规划方法中，无需考虑智能体和环境的交互过程，只需利用奖励函数和折扣因子计算每个状态的 V 值。

请从 `策略迭代` 或者 `价值迭代`  中选择一种方法实现，`Assignmen1/dp.py` 提供了一个基础的模板，在此基础上完成你的代码，模板中内容可以根据需要更改，但需要保证其是一个可运行的程序，运行结果需打印出最终收敛的 V 表 `v` ，以及使用 `env.update_r(v)` 后将 V 表的值同步至环境端后的渲染图形 (模板中已给出渲染方法)，输出格式不限制。

随机策略下评估收敛渲染图示例：

![dp.png](../docs/images/dp.png)


## 提交

### 代码

提交 `.py` 文件，前缀：学号\_姓名，后缀：\_dp, 若提交后需更新代码，请加后缀 \_v1, \_v2，以此类推。

如: 22000000\_张三\_dp.py, 22000000\_张三\_mc.py, 22000000\_张三\_td.py。

### 报告

提交一份 `.pdf` 文件，命名：学号\_姓名，报告内容可自由发挥，详略自定。可描述核心代码的思路等。

因代码运行的不确定性，可将代码执行结果（V 表、收敛后的渲染图形等）在报告中体现。

### 提交方式

将以上代码和报告压缩成压缩包发送到邮箱13868629768@163.com，截止日期: 2025.4.22 23:59。

## 问题反馈
有任何疑问可直接在课程群中提问，或者在此提 Issues，或者发邮件至助教邮箱: kekq@mail2.sysu.edu.cn，每天固定时间检查并回复邮件，请勿直接添加助教个人微信。